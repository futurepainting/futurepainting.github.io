<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>Future Painting</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

<div class="gallery">
  
  <div class="counter" id="counter">01 / 03</div>

  <div class="artwork active">
    <a href="art1.html">
      <img src="art1.jpg">
    </a>
    <div class="info">
      <h2>작품 제목 1</h2>
      <p>천애정 · 2024</p>
    </div>
  </div>

  <div class="artwork">
    <a href="art2.html">
      <img src="art2.jpg">
    </a>
    <div class="info">
      <h2>작품 제목 2</h2>
      <p>천애정 · 2023</p>
    </div>
  </div>

  <div class="artwork">
    <a href="art3.html">
      <img src="art3.jpg">
    </a>
    <div class="info">
      <h2>작품 제목 3</h2>
      <p>천애정 · 2022</p>
    </div>
  </div>

</div>

<script>
document.addEventListener('DOMContentLoaded', () => {
  const slides = document.querySelectorAll('.artwork').length
    ? document.querySelectorAll('.artwork')
    : document.querySelectorAll('.art');

  const counter = document.getElementById('counter');

  if (!slides.length) {
    console.log('슬라이드가 0개예요. .artwork 또는 .art 클래스 확인!');
    return;
  }

  let current = 0;
  let isScrolling = false;

  function updateCounter() {
    if (!counter) return; // counter 없어도 작품 넘김은 되게
    const currentNum = String(current + 1).padStart(2, '0');
    const totalNum = String(slides.length).padStart(2, '0');
    counter.textContent = `${currentNum} / ${totalNum}`;
  }

  function activate(index) {
    slides[current].classList.remove('active');
    current = (index + slides.length) % slides.length;
    slides[current].classList.add('active');
    updateCounter();
  }

  function activateFromHash() {
    const n = parseInt(location.hash.replace('#', ''), 10);
    if (!isNaN(n) && n >= 1 && n <= slides.length) {
      slides.forEach(s => s.classList.remove('active'));
      current = n - 1;
      slides[current].classList.add('active');
      updateCounter();
    } else {
      updateCounter();
    }

    isScrolling = false; // 전시로 돌아왔을 때 상태 리셋
  }

  activateFromHash();
  window.addEventListener('hashchange', activateFromHash);

  window.addEventListener('wheel', (e) => {
    if (isScrolling) return;

    if (e.deltaY > 0) activate(current + 1); // 다음
    else if (e.deltaY < 0) activate(current - 1); // 이전

    isScrolling = true;
    setTimeout(() => isScrolling = false, 420);
  }, { passive: true });
});
</script>



</body>
</html>














